## RStudio 2024.04.0 "Chocolate Cosmos" Release Notes

### New

#### RStudio

- RStudio now requires R 3.6.0 or newer. (#14210)
- RStudio's auto-completion system now supports ggplot2 aesthetic names and data columns (#8444)
- RStudio's auto-completion system now supports the display of the "label" attribute (#14242)
- RStudio Desktop on Windows and Linux supports auto-hiding the menu bar (#8932)
- RStudio Desktop on Windows and Linux supports full-screen mode via F11 (#3243)
- RStudio Desktop now supports pasting of file paths for files copied to the clipboard (#14240)
- RStudio now reports a diagnostics warning when `=` (rather than `==`) is used in `if`, `for`, and `while` conditionals (#14455)
- R projects can be given a custom display name in Project Options (#1909)
- The automatic display of Copilot code completions can now be controlled via a user preference (#14033)
- Copilot code suggestions can now be requested via the keyboard shortcut `Ctrl + \`
- The next word in a Copilot code suggestion can now be accepted via `Ctrl + Right` (`Cmd + Right` on macOS) (#14395)
- RStudio now highlights and lints Quarto chunk options in Python code chunks
- RStudio no longer highlights `\[ \]` and `\( \)` Mathjax equations; prefer `$$ $$` and `$ $` instead (#12862)
- Added cmake option to build RStudio without the check for updates feature (#13236)
- Allow choosing R from non-standard location at startup (#14180; Windows Desktop)
- Add `EnvironmentFile` support to systemd service definitions (#13819)
- RStudio's GWT sources can now be built with JDKs > 11 (#11242)
- Show grey background instead of solid-white during Desktop startup (#13768)
- The 'restartSession()' API method gains the 'clean' argument. (#2841)
- 'dot' chunks in R Markdown documents are now executable (#14063)
- (rstudioapi) Fixed an issue where selectFile() did not parse filter strings in a cross-platform way (#13994)
- Show Quarto version information in the About dialog (#14263)
- RStudio now reports repository validation errors (if any) when adding secondary repositories in the Global Options -> Packages pane (#13842)
- The working directory of a background job now defaults to the .Rproj location when a project is open (#12600)
- Add search results copy button and search results breadcrumbs to RStudio User Guide (#13618, #14069)
- RStudio now supports generation of a Copilot diagnostic report from the Copilot preferences pane (#14358)
- The RStudio debugger is now better at matching debugged code to source documents (#13925)
- RStudio no longer includes spurious chunk markers from Copilot completion results (#13686)
- Added new commands which toggle the maximized state of Console, Source, and Tab Group quadrants [Accessibility] (#7022)
- RStudio now prints a warning if an overly-long line of console input is truncated when sending to R (#14420)
- Updated zlib to 1.3.1 (rstudio/rstudio-pro#5971)
- Vim: Fixed an issue where bracket highlight followed the bracket behind the cursor when in normal mode (#4152)
- Updated nginx to 1.25.4 (rstudio/rstudio-pro#5970)
- Implemented Posit Product Documentation theme to RStudio & Posit Workbench Release Notes and RStudio IDE User Guide via Quarto extension (#14513)

#### Posit Workbench
- Show custom project names on Workbench homepage (rstudio-pro#5589)
- Added support for JupyterLab 4 through the Python extension [PWB JupyterLab](https://pypi.org/project/pwb-jupyterlab/) (rstudio-pro#5777)
- Added search results copy button and search results breadcrumbs to Workbench Administration Guide, Workbench User Guide, RStudio Desktop Pro Administration Guide (#5088, #5603)
- Migrated Troubleshooting Launcher and Kubernetes guide from docs.posit.co site to Workbench Administration Guide: Job Launcher > Launcher Troubleshooting section (#5720)
- Add search results copy button and search results breadcrumbs to Workbench Administration Guide, Workbench User Guide, RStudio Desktop Pro Administration Guide (#5088, #5603)
- When launching sessions from the home page, memory is now shown in GB rather than MB (rstudio-pro#2722)
- When running sessions on Kubernetes or Slurm with Singularity, the home page now remembers the container image used most recently and sets it as the default. This includes custom images, when permitted (rstudio-pro#3601, rstudio-pro#4079)
- When launching a session from the home page on Kubernetes or Slurm, the dropdown for available container images is now better organized and manages long image names more gracefully (rstudio-pro#5630)
- Opening the job summary for a session on the home page now shows much more detailed information, including the session's host (if available), AWS role and/or Databricks Workspace (if any), queue (on Slurm), platform-native ID (on Slurm and Kubernetes) and resource profile (if applicable) (rstudio-pro#3690, rstudio-pro#5537)
- The Databricks pane is now enabled by default if there are Databricks workspaces configured in the `databricks.conf` file. There is no need to enable it separately. To disable the pane, set `databricks-enabled=0` in the `rserver.conf` file (rstudio-pro#5556)
- A new icon on the RStudio Pro toolbar shows information on active AWS or Databricks credentials, if present (rstudio-pro#5860)
- The PostgreSQL password can now be set via environment variable (rstudio-pro#5332)
- Implemented Posit Product Documentation theme to Posit Workbench Administration Guide, Posit Workbench Licenses, Posit Workbench User Guide, amd RStudio Desktop Administration Guide via Quarto extension (rstudio-pro/issues/5729)
- Updated nginx to 1.25.4 (rstudio/rstudio-pro#5970)
- Updated nodejs to 18.19.1 (rstudio/rstudio-pro#5935)
- Performance improvement where nginx handles static files, configurable with nginx.static.conf file (rstudio/rstudio-pro#5671)
- VSCode: upgraded coder/code-server to 4.22.1 (centos 4.16.1). Added preview of Code OSS - with Posit, pwb-code-server (rstudio/rstudio-pro#3777)
- Robustness and scalability improvements for streaming connections. Close all streaming connections when tabs are invisible, and impose limits on "session output view". Added options for tuning large-scale system performance: launcher-sessions-proxy-timeout-seconds, max-streams-per-user, streaming-connection-timeout-seconds rserver.conf option.  (rstudio/rstudio-pro#5888, rstudio/rstudio-pro#5616, rstudio/rstudio-pro#5771, rstudio/rstudio-pro#3417)
- Fixed sporadic CPU usage and crash in rworkspaces (rstudio/rstudio-pro#5690)
- Fixed problem with `rstudio-server reload` changing permissions on nginx proxy/body dirs leading to user errors accessing the system (rstudio/rstudio-pro#5636)
- Added support for debug, and strace session diagnostics for individual user sessions. Create a file with 'strace' or 'debug' in ~/.config/rstudio/rsession-diagnostics or ~/.config/pwb/jupyter-diagnostics, vscode-diagnostics. Logs in ~/.local/share/{rstudio,pwb}/log. (rstudio/rstudio-pro#5529)

### Fixed

#### RStudio

- Fixed an issue where Stage chunk and Stage line in the Review Changes UI failed in some scenarios (#5476)
- Fixed shortcut for inserting an assignment operator to work on non-US English keyboards (#12457)
- Fixed an issue where the menubar would show on secondary windows if Alt key was pressed (#13973)
- Fixed Windows installer to delete Start Menu shortcut during uninstall (#13936)
- Fixed current Git branch not always showing correctly in external editor windows (#14029)
- Fixed tooltip to show correct keyboard shortcut when hovering over URLs in the editor (#12504)
- Fixed Save As dialog on Windows not showing Save As Type field when extensions are hidden (#12965)
- Fixed GitHub Copilot project preferences not showing correct status message (#14064)
- Fixed an issue where Quarto chunk option completions were not displayed at the start of a comment (#14074)
- Fixed an issue where pipes containing a large number of comments were not indented correctly (#12674)
- Fixed an issue where RStudio would unnecessarily list directory contents when opening a file (#14096)
- Localize Copilot-related user interface strings into French (#14092)
- Improved highlighting of YAML chunk options for Quarto Documents (#13836)
- Removed obsolete "Use Internet Explorer library/proxy" checkbox from Packages settings (#13250)
- Improved error handling for Desktop Pro license handling (rstudio-pro#4873)
- Fixed exception being logged when copying or cutting from editor in a separate window (#14140)
- Fixed an issue where RStudio's R diagnostics warned about potentially missing arguments even when disabled via preferences (#14046)
- Fixed an issue where the Visual Editor's toolbar controls were duplicated on format change (#12227)
- Fixed regression that caused extra whitespace at bottom of some popups (#14223)
- Fix type dropdowns not working in dataset import when user-interface is in French (#14224)
- Fixed an issue where RStudio failed to retrieve help for certain S3 methods (#14232)
- Fixed a regression where the Data Viewer did not display 'variable.labels' for columns (#14265)
- Fixed an issue where autocompletion help was not properly displayed for development help topics (#14273)
- Fixed an issue where Shiny onSessionEnded callbacks could be interrupted when stopped in RStudio (#13394)
- Fixed Copyright date ranges for Release Notes and RStudio IDE User Guide (#14078)
- Fixed Copyright date ranges for Workbench Administrator and Workbench User Guide, and RStudio Desktop Pro Administration Guide (#5614)
- Fixed mis-encoded Hunspell dictionaries (#8147)
- Fixed an issue where the RStudio debugger failed to step through statements within a tryCatch() call (#14306)
- Improved responsiveness of C / C++ editor intelligence features when switching Git branches (#14320)
- Show an error dialog if R is not found when starting RStudio Desktop on Linux and macOS (#14343)
- An empty `rstudio-prefs.json` no longer logs spurious JSON parsing errors (rstudio-pro#4347)
- Help pane's Next and Previous find-in-topic buttons now have meaningful accessible labels [Accessibility] (#14347)
- Fixed an issue where the RStudio debugger would re-focus a debugged context over-aggressively (#10664)
- Fixed handling of duplicated calls in debugger when source references not available (#14276)
- Fixed issue where stepping through lines of code in tryCatch() would provide incorrect debug highlight (#14306)
- Fixed an issue where PATH modifications in .Renviron / .Rprofile could be lost on macOS (#9815)
- Fixed an issue where custom headers were not propagated to `available.packages()` when calling `install.packages()` (#14282)
- Fixed an issue where code highlight in Sweave \Sexpr{} expressions was incorrectly handled (#14382)
- Fixed an issue where the Edit button in the Viewer pane could fail for Quarto documents (#14325)
- Fixed an issue where terminal history would show internal commands (#9833)
- Fixed an issue where RStudio could fail to launch with Conda builds of R (#13184)
- Fixed an issue where hovering over S4 class names in the Help pane could produce an R error (#13344)
- Fixed an issue where defining a custom viewer method produced an R error when View was called (#14439)
- Fixed an issue where Quarto dashboards could not be previewed if their file path contained a single quote (#13900)
- Fixed an issue where language objects (calls, formulas) were not described in the Environment pane (#14446)
- Improved some French translations of the UI
- Fixed an issue where searches in the Help pane could fail for entries like `[<-` (#10975)
- Fixed an issue where the "Save workspace on exit" preference was ignored in some cases (#14258)
- Fixed an issue where the NEWS button in the Update Packages dialog could fail to find the package NEWS file in some cases (#12648)

#### Posit Workbench
- Fixed an issue where Professional Driver installation could fail on macOS (rstudio-pro#5168)
- Fixed Copyright date ranges for Workbench Administrator Guide and Workbench User Guide (rstudio-pro#5865)
- Fixed low-contrast text on Workbench pages [Accessibility] (rstudio-pro#4464)
- The terminal pane of JupyterLab sessions now respects the user's default shell (rstudio-pro#5484)
- The Databricks pane now respects the `databricks-enabled=1` setting in the `rserver.conf` file even when running in legacy RStudio Server Pro mode (rstudio-pro#5695)
- When launching sessions on Slurm, pending or failed sessions will no longer erroneously appear in the Workbench Jobs pane on the home page (rstudio-pro#4846)

### Dependencies
- Updated Ace to version 1.32.5 (#14227; Desktop + Server)
- Updated Electron to version 28.2.6 (#14055; Desktop)
- Updated GWT to version 2.10.0 (#11505; Desktop + Server)
- Updated NSIS to version 3.09 (#14123; Windows Desktop)
- Updated OpenSSL to version 3.1.4 (Windows Desktop)
- Updated node.js to version 18.19.1 (#14373)

